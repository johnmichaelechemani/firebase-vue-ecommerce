import{u as B,G as E,j as n,J as s,k as h,m as j,c as g,a,A as I,b as w,d as y,w as k,v as _,N as F,O as V,o as f,I as x}from"./index-CDMhr0U-.js";import{g as z,r as A,u as $,a as q}from"./index.esm2017-jKhNGMCK.js";const J={class:"sm:ml-72 ml-20 fixed top-12 left-0 sm:w-[calc(100%-18rem)] w-[calc(100%-5rem)] h-full"},M={class:"py-2"},O={class:"m-2"},T={class:"relative sm:mb-14 mb-5"},G={class:"w-full h-32 sm:h-52 bg-gray-700/50"},H=["src"],K={class:"border-2 border-gray-700 bg-gray-700/90 absolute sm:-bottom-10 -bottom-5 left-2 shadow-xl"},Q={class:"relative sm:size-20 size-10"},W=["src"],X={class:"mb-3"},Y={class:"mb-3"},te={__name:"mallProfile",setup(Z){const{user:r}=B(),U=E(),N=z(),d=n(null),m=n(null),i=n(null),c=n(null),o=n({userName:s.value.userName,email:s.value.email,backgroundImage:s.value.bgImage||null,profileImage:s.value.userPhotoURL||null}),R=t=>{const e=t.target.files[0];if(e){const l=new FileReader;l.onload=u=>{i.value=u.target.result,o.value.backgroundImage=e},l.readAsDataURL(e)}},L=t=>{const e=t.target.files[0];if(e){const l=new FileReader;l.onload=u=>{c.value=u.target.result,o.value.profileImage=e},l.readAsDataURL(e)}},v=async(t,e)=>{if(!t||!r.value)return null;try{const l=A(N,e),u=await $(l,t);return await q(u.ref)}catch(l){return console.error("Error uploading image:",l),null}},P=async()=>{try{if(r.value){const t={userName:o.value.userName,email:o.value.email};if(o.value.backgroundImage instanceof File){const l=await v(o.value.backgroundImage,`users/${r.value.uid}/background_image`);l&&(t.bgImage=l)}if(o.value.profileImage instanceof File){const l=await v(o.value.profileImage,`users/${r.value.uid}/profile_image`);l&&(t.userPhotoURL=l)}const e=F(U,"users",r.value.uid);await V(e,t),s.value={...s.value,...t},localStorage.setItem("userData",JSON.stringify({...s.value,...t})),console.log("Profile updated successfully")}}catch(t){console.error("Error saving profile data:",t)}},D=()=>{d.value.click()},S=()=>{m.value.click()},p=h(()=>i.value?i.value:s.value.bgImage||null),b=h(()=>c.value?c.value:s.value.userPhotoURL||null),C=()=>{o.value={userName:s.value.userName,email:s.value.email,backgroundImage:null,profileImage:null},i.value=null,c.value=null,d.value.value="",m.value.value=""};return j(()=>{console.log(s.value)}),(t,e)=>(f(),g("div",J,[a("div",M,[a("div",O,[e[4]||(e[4]=a("h1",{class:"text-sm mb-2 font-semibold"},"Edit your Profile",-1)),a("div",T,[a("input",{type:"file",ref_key:"backgroundImageInput",ref:d,onChange:R,accept:"image/*",class:"hidden"},null,544),a("div",G,[p.value?(f(),g("img",{key:0,src:p.value,loading:"lazy",alt:"Background Image",class:"w-full h-full object-cover object-center"},null,8,H)):I("",!0),a("button",{onClick:D,class:"absolute bottom-2 shadow right-2 p-1 border-2 bg-white rounded-full"},[w(y(x),{icon:"material-symbols-light:edit-outline",width:"24",height:"24"})])]),a("input",{type:"file",ref_key:"profileImageInput",ref:m,onChange:L,accept:"image/*",class:"hidden"},null,544),a("div",K,[a("div",Q,[b.value?(f(),g("img",{key:0,src:b.value,alt:"profile",loading:"lazy",class:"w-full h-full object-cover object-center"},null,8,W)):I("",!0),a("button",{onClick:S,class:"absolute -bottom-2 shadow -right-2 border-2 bg-white rounded-full"},[w(y(x),{icon:"material-symbols-light:edit-outline",width:"24",height:"24"})])])])]),a("div",X,[e[2]||(e[2]=a("p",{class:"text-xs mb-1 font-semibold"},"Store Name:",-1)),k(a("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>o.value.userName=l),required:"",class:"font-semibold text-sm p-1 placeholder:text-xs placeholder:font-normal outline-gray-500/20 border w-full",placeholder:"Enter store name"},null,512),[[_,o.value.userName]])]),a("div",Y,[e[3]||(e[3]=a("p",{class:"text-xs mb-1 font-semibold"},"Store Email:",-1)),k(a("input",{type:"email","onUpdate:modelValue":e[1]||(e[1]=l=>o.value.email=l),required:"",class:"font-semibold text-sm p-1 placeholder:text-xs placeholder:font-normal outline-gray-500/20 border w-full",placeholder:"Enter store email"},null,512),[[_,o.value.email]])]),a("div",{class:"mb-3"},[a("div",{class:"flex items-center justify-start gap-2"},[a("button",{onClick:C,class:"w-20 border text-sm py-2 text-gray-700 font-semibold"}," Clear "),a("button",{onClick:P,class:"w-20 border text-sm py-2 text-white bg-gray-800 font-semibold"}," Save ")])])])])]))}};export{te as default};
