import{j as c,k as h,m as x,q as N,s as L,c as a,a as s,A as i,b as u,d,t as w,n as _,f as M,B as f,x as C,F as q,p as A,C as T,r as V,o,I as g,D,P as R,e as S,E,z as b,y as U}from"./index-efUQckq_.js";const Y={class:""},G={class:"relative sm:mb-14 mb-5"},H={class:"w-full h-32 sm:h-52 bg-gray-700/50"},J=["src"],K={class:"sm:size-20 size-10 absolute sm:-bottom-10 -bottom-5 left-2"},O=["src"],Q={key:1},W={class:"mb-3 flex justify-start items-center gap-2"},X={class:"font-semibold text-lg drop-shadow-lg"},Z={class:"flex justify-start items-center gap-4"},ee={class:"my-2"},te={key:0},se={key:0,class:"text-center"},oe={key:1,class:"flex flex-wrap gap-1"},ae={key:1,class:"flex gap-2"},le={class:"flex gap-2"},re=["onClick"],ne={key:0},ce={class:"flex flex-wrap gap-1 my-5"},me={__name:"mallsAccount",setup(ie){const P=E(),v=T(),l=c("shop"),m=c(!0),I=c(b),p=c(!0),k=h(()=>p.value?[]:b.value.filter(e=>e.mallId===v.params.id)),y=(e,t)=>{P.push({path:`/malls/${t}/`,query:{category:e}})},j=h(()=>{const e=v.params.id;return U.value.find(t=>t.userId===e)}),n=h(()=>j.value||{userName:"Unknown Mall",image:null,bgImage:null}),z=()=>{m.value=!m.value,I.value=b.value.sort((e,t)=>m.value?t.price-e.price:e.price-t.price)},$=e=>{y("price",e),z()};x(()=>{y("popular",v.params.id)});const B=c([{id:1,name:"Popular",category:"popular"},{id:2,name:"Latest",category:"latest"},{id:3,name:"Top Sales",category:"top_sales"},{id:4,name:"Price",category:"price",icon:!0}]);return x(async()=>{try{p.value=!0,await N(),L()}catch(e){console.error("Failed to load mall data:",e)}finally{p.value=!1}}),(e,t)=>{const F=V("router-link");return o(),a("div",Y,[s("div",G,[s("div",H,[n.value.image?(o(),a("img",{key:0,src:n.value.bgImage,loading:"lazy",alt:"Background Image",class:"w-full h-full object-cover object-center"},null,8,J)):i("",!0)]),s("div",K,[n.value.image?(o(),a("img",{key:0,src:n.value.image,alt:"profile",loading:"lazy",class:"w-full h-full object-cover object-center"},null,8,O)):(o(),a("div",Q,[u(d(g),{icon:"noto-v1:convenience-store",class:"sm:size-20 size-10"})]))])]),s("div",W,[s("h1",X,w(n.value.userName),1),d(D)?(o(),_(F,{key:0,to:{name:"mallsChat",params:{id:n.value.mallId}},class:"p-1 shadow border hover:bg-gray-500/10"},{default:M(()=>[u(d(g),{icon:"material-symbols-light:chat-outline",width:"24",height:"24"})]),_:1},8,["to"])):i("",!0)]),s("div",Z,[s("button",{class:f(["px-4 py-1 text-sm font-semibold",{"bg-gray-800 text-white":l.value==="shop","text-gray-800":l.value!=="shop"}]),onClick:t[0]||(t[0]=r=>l.value="shop")}," Shop ",2),s("button",{class:f(["px-4 py-1 text-sm font-semibold",{"bg-gray-800 text-white":l.value==="products","text-gray-800":l.value!=="products"}]),onClick:t[1]||(t[1]=r=>l.value="products")}," Products ",2)]),t[3]||(t[3]=s("hr",null,null,-1)),s("div",ee,[l.value==="shop"?(o(),a("div",te,[t[2]||(t[2]=s("p",{class:"font-semibold text-sm my-2"},"Recommended For You",-1)),p.value?(o(),a("div",se,[u(R)])):(o(),a("div",oe,[u(C,{products:k.value},null,8,["products"])]))])):i("",!0),l.value==="products"?(o(),a("div",ae,[s("div",null,[s("div",le,[(o(!0),a(q,null,A(B.value,r=>(o(),a("button",{key:r.id,onClick:ue=>r.category==="price"?$(e.$route.params.id):y(r.category,e.$route.params.id),class:f([e.$route.query.category===r.category?"border-b-4 border-gray-800 font-semibold ":"hover:bg-gray-700/10 border font-medium","px-2 py-1 text-sm flex justify-start items-center gap-1 transition "])},[S(w(r.name)+" ",1),r.icon?(o(),a("div",ne,[m.value?(o(),_(d(g),{key:0,icon:"mdi-light:arrow-up",width:"16",height:"16"})):(o(),_(d(g),{key:1,icon:"mdi-light:arrow-down",width:"16",height:"16"}))])):i("",!0)],10,re))),128))]),s("div",ce,[u(C,{products:k.value},null,8,["products"])])])])):i("",!0)])])}}};export{me as default};
