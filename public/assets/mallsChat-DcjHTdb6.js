import{j,J as v,K as k,k as p,m as I,q as z,c as a,a as e,e as y,b as s,t as n,d as f,F as D,p as M,w as R,v as B,i as C,A as L,B as N,o as l,I as x,T as _,y as P}from"./index-B-cudqEO.js";import{c as T,m as U}from"./chatFunctions-uqxoLNz1.js";const V={class:"bg-gray-400/5 border relative shadow-xl overflow-y-scroll no-scrollbar"},A={class:"flex gap-2 justify-start items-center shadow-sm p-2 border-b"},F={class:"flex justify-center bg-gray-700/10 border size-8 items-center"},S=["src"],q={key:1,class:"flex justify-center items-center"},E={key:0,class:"text-sm font-semibold capitalize"},J={class:"h-[calc(100vh-10rem)] overflow-y-auto pb-14 mx-2 py-2"},K={key:0,class:"my-2"},$={class:"flex justify-center items-center text-[9px] text-gray-500"},G={class:"flex justify-start items-end font-medium text-gray-800 gap-2"},H={class:"sm:max-w-[calc(100%-10rem)] max-w-[calc(100%-5rem)] min-w-32"},O={class:"pl-3 pr-2 pb-1 pt-2 text-sm bg-gray-700/10"},Q={key:1,class:"my-2"},W={class:"flex justify-center items-center text-[9px] text-gray-500"},X={class:"flex justify-end items-end font-medium text-gray-800 gap-2"},Y={class:"sm:max-w-[calc(100%-10rem)] max-w-[calc(100%-5rem)]"},Z={class:"pl-3 pr-2 py-1.5 text-sm bg-gray-700/10"},ee={class:"size-6 bg-gray-800"},se=["src"],te={class:"absolute bottom-0 left-0 z-10 w-full bg-gray-50"},ae={class:"relative shadow-xl p-1 flex justify-between items-center border"},le=["disabled"],ne={__name:"mallsChat",setup(oe){const{message:i,sendMessage:h}=T(),c=N(),u=j(c.params.id),g=v.value.userId,m=v.value.userPhotoURL;k(()=>c.params.id,d=>{u.value=d});const b=p(()=>P.value.find(d=>d.userId===u.value)),r=p(()=>b.value);return I(async()=>{await z()}),(d,t)=>(l(),a("div",V,[e("div",null,[e("div",A,[e("div",F,[r.value&&r.value.userPhotoURL?(l(),a("img",{key:0,src:r.value.userPhotoURL,alt:"mall profile",class:"w-full h-full object-center object-cover"},null,8,S)):(l(),a("div",q,[y(s(x),{icon:"material-symbols-light:store",width:"30",height:"30"})]))]),e("div",null,[r.value?(l(),a("p",E,n(r.value.userName),1)):f("",!0)])]),e("div",J,[(l(!0),a(D,null,M(s(U),(o,w)=>(l(),a("div",{key:w},[o.senderId!==s(g)?(l(),a("div",K,[e("div",$,n(s(_)(o.timestamp)),1),e("div",G,[t[3]||(t[3]=e("div",{class:"size-6 bg-gray-800"},null,-1)),e("div",H,[e("div",O,n(o.message),1),t[2]||(t[2]=e("div",{class:"flex justify-start items-center text-xs font-semibold text-gray-500"}," Sending... ",-1))])])])):(l(),a("div",Q,[e("div",W,n(s(_)(o.timestamp)),1),e("div",X,[e("div",Y,[e("div",Z,n(o.message),1),t[4]||(t[4]=e("div",{class:"flex justify-end items-center text-xs font-semibold text-gray-500"}," Delivered ",-1))]),e("div",ee,[s(m)?(l(),a("img",{key:0,src:s(m),alt:""},null,8,se)):f("",!0)])])]))]))),128))]),e("div",te,[e("div",ae,[R(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>C(i)?i.value=o:null),class:"w-full py-1 px-3 outline-none bg-transparent placeholder:text-sm",placeholder:"Type a message"},null,512),[[B,s(i)]]),e("button",{onClick:t[1]||(t[1]=o=>s(h)(s(c).params.id)),disabled:s(i).trim()==="",class:L([s(i).trim()===""?"cursor-not-allowed ":"cursor-pointer","py-1 pl-2 pr-1 hover:bg-gray-800 hover:text-white transition border"])},[y(s(x),{icon:"material-symbols-light:send-rounded",width:"32",height:"32"})],10,le)]),t[5]||(t[5]=e("div",null,null,-1))])])]))}};export{ne as default};
