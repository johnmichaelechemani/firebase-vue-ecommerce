import{G as P,H as x,J as z,m as D,n as I,p as M,K as N,c as r,a as t,F as y,q as g,x as o,b as a,e as p,f as c,g as d,o as n,B as R,I as l,T as S,h as V,L as b,E as F,C as $,M as v,r as A,N as w,O as k,Q as E}from"./index-KYwfQVKJ.js";const L={class:"sm:ml-72 ml-20 fixed top-14 left-0 sm:w-[calc(100%-18rem)] w-[calc(100%-5rem)] h-full"},G={class:"p-2"},H={class:"mt-4 flex no-scrollbar overflow-x-auto gap-8"},J=["onClick"],K={class:"text-sm mt-2 text-center font-semibold"},Q={class:"text-sm font-semibold p-2 capitalize"},Y={class:"overflow-y-scroll no-scrollbar h-[calc(100vh-3.5rem)] pb-48"},U={class:"mx-2 flex flex-wrap gap-2"},W={class:"text-xs font-semibold text-gray-600"},X={class:"flex justify-between items-center"},Z={class:"text-sm font-semibold flex justify-between items-center"},tt={class:"text-xs shadow-sm font-medium border border-gray-800/50 px-2 capitalize"},et={class:"flex justify-start items-start gap-2"},st={class:"sm:size-20 size-16 bg-gray-700/10 border-gray-700/20 border relative"},ot=["src"],at={class:"text-sm font-semibold"},it={class:"flex justify-start items-center gap-2"},ct={class:"text-xs font-medium flex justify-start items-center gap-0.5"},rt={class:"font-semibold flex justify-start items-center gap-2"},nt={class:"font-semibold text-xs flex justify-start items-center gap-0.5"},lt={class:"font-medium flex justify-start items-center gap-2"},dt={class:"font-medium text-xs uppercase flex justify-start items-center gap-0.5"},ut={class:"flex flex-wrap"},ht={class:"font-semibold text-xs flex justify-start items-center flex-wrap gap-1"},mt={class:"text-sm font-bold px-2 py-0.5 bg-gray-800 text-white"},pt={key:0,class:"flex justify-end mt-2"},ft=["onClick"],_t={key:1,class:"text-sm font-semibold flex justify-start items-center gap-2"},xt={class:"p-2 border shadow-sm"},vt={__name:"Purchase",setup(yt){const C=F(),f=$(),j=s=>{C.push({path:"/purchase",query:{status:s}})},_=P(),q=x(_,"purchase",z.value.userId,"items"),O=x(_,"products"),T=D([{id:1,name:"To Pay",status:"pay",icon:"mdi:credit-card-chip-outline"},{id:2,name:"To Ship",status:"ship",icon:"mdi:ship-wheel"},{id:3,name:"To Recieve",status:"recieve",icon:"mdi:target-account"},{id:4,name:"To Rate",status:"rate",icon:"mdi:star-outline"},{id:5,name:"Completed",status:"completed",icon:"mdi:check"},{id:6,name:"Cancelled",status:"cancelled",icon:"mdi:cancel-box-outline"}]),h=I(()=>{const s=f.query.status;return s?v.value.filter(i=>i.status===s):v.value}),m=(s,i)=>({completed:{text:"Buy Again",action:()=>console.log("Buy Again Clicked")},pay:{text:"Cancel",action:()=>B(i)},ship:{text:"Track Order",action:()=>console.log("Track Order Clicked")},rate:{text:"Rate Order",action:()=>console.log("Rate Order Clicked")},recieve:{text:"View Order",action:()=>console.log("View Order Clicked")}})[s]||null,B=async s=>{const i=w(q,s.id),u=w(O,s.productId);await k(i,{status:"cancelled"}),await k(u,{inventory:E(s.quantity)})};return M(()=>{N()}),(s,i)=>{const u=A("router-link");return n(),r("div",L,[t("div",G,[i[0]||(i[0]=t("p",{class:"text-sm font-semibold"},"My Purchase",-1)),t("div",H,[(n(!0),r(y,null,g(T.value,e=>(n(),r("div",{class:"place-items-center",key:e.id,onClick:gt=>j(e.status)},[t("div",{class:R([s.$route.query.status===e.status?"bg-gray-800 text-white":"hover:bg-gray-700/10 border","p-2 transition "])},[c(a(l),{icon:e.icon,width:"24",height:"24"},null,8,["icon"])],2),t("p",K,o(e.name),1)],8,J))),128))])]),t("p",Q,o(Object.keys(s.$route.query).length===0?"All":a(f).query.status),1),t("div",Y,[t("div",U,[h.value?(n(!0),r(y,{key:0},g(h.value,e=>(n(),r("div",{key:e.id,class:"shadow-sm border p-2 w-full sm:max-w-72"},[t("div",W,o(a(S)(e.purchaseDate)),1),t("div",X,[t("div",Z,[c(u,{to:{name:"mallStore",params:{id:e.mallId}},class:"flex justify-start items-center"},{default:V(()=>[t("span",null,[c(a(l),{icon:"material-symbols-light:store",width:"24",height:"24"})]),d(o(e.store)+" ",1),c(a(l),{icon:"material-symbols-light:double-arrow",width:"20",height:"20"})]),_:2},1032,["to"])]),t("div",tt,o(e.status),1)]),t("div",et,[t("div",st,[t("img",{src:e.image,loading:"lazy",alt:"",class:"object-center h-full w-full object-cover"},null,8,ot)]),t("div",null,[t("p",at,o(e.name),1),t("div",it,[t("p",ct,[c(a(l),{icon:"material-symbols-light:price-change-outline",width:"20",height:"20"}),d(" "+o(a(b)(e.price)),1)])]),t("div",rt,[t("div",nt,[c(a(l),{icon:"material-symbols-light:production-quantity-limits",width:"20",height:"20"}),d(o(e.quantity),1)])]),t("div",lt,[t("span",dt,[c(a(l),{icon:"material-symbols-light:delivery-truck-bolt-outline",width:"20",height:"20"}),d(o(e.paymentMethod),1)])]),t("div",ut,[t("div",ht,[d(" Total "+o(e.quantity)+" Item : ",1),t("p",mt," $ "+o(a(b)(e.quantity*e.price)),1)])])])]),m(e.status)?(n(),r("div",pt,[t("button",{class:"border text-sm border-gray-700/50 hover:bg-gray-800 transition hover:text-white font-semibold px-4 py-2",onClick:m(e.status,e).action},o(m(e.status).text),9,ft)])):p("",!0)]))),128)):p("",!0),h.value.length===0?(n(),r("div",_t,[t("span",xt,[c(a(l),{icon:"mdi:cup-empty",width:"24",height:"24"})]),i[1]||(i[1]=d("No Orders Yet "))])):p("",!0)])])])}}};export{vt as default};
