import{u as w,j,E as k,s as p,m as z,q as I,c as l,a as e,e as y,b as t,t as c,d as f,F as M,k as R,w as B,v as C,i as D,n as L,y as N,o as a,I as x,B as T}from"./index-Ce3yGuet.js";import{c as U,m as V}from"./chatFunctions-Ce3naCMw.js";const A={class:"bg-gray-400/5 border relative shadow-xl overflow-y-scroll no-scrollbar"},F={class:"flex gap-2 justify-start items-center shadow-sm p-2 border-b"},P={class:"flex justify-center bg-gray-700/10 border size-8 items-center"},E=["src"],S={key:1,class:"flex justify-center items-center"},q={key:0,class:"text-sm font-semibold capitalize"},$={class:"h-[calc(100vh-10rem)] overflow-y-auto pb-14 mx-2 py-2"},G={key:0,class:"my-2"},H={class:"flex justify-start items-end font-medium text-gray-800 gap-2"},J={class:"sm:max-w-[calc(100%-10rem)] max-w-[calc(100%-5rem)] min-w-32"},K={class:"pl-3 pr-2 pb-1 pt-2 text-sm bg-gray-700/10"},O={key:1,class:"my-2"},Q={class:"flex justify-end items-end font-medium text-gray-800 gap-2"},W={class:"sm:max-w-[calc(100%-10rem)] max-w-[calc(100%-5rem)]"},X={class:"pl-3 pr-2 py-1.5 text-sm bg-gray-700/10"},Y={class:"size-6 bg-gray-800"},Z=["src"],ee={class:"absolute bottom-0 left-0 z-10 w-full bg-gray-50"},se={class:"relative shadow-xl p-1 flex justify-between items-center border"},te=["disabled"],re={__name:"mallsChat",setup(le){const{user:u}=w(),{message:r,sendMessage:g}=U(),d=N(),m=j(d.params.id),h=u.value.uid,v=u.value.photoURL;k(()=>d.params.id,n=>{m.value=n});const b=p(()=>T.value.find(n=>n.userId===m.value)),i=p(()=>b.value);return z(async()=>{await I()}),(n,s)=>(a(),l("div",A,[e("div",null,[e("div",F,[e("div",P,[i.value&&i.value.userPhotoURL?(a(),l("img",{key:0,src:i.value.userPhotoURL,alt:"mall profile",class:"w-full h-full object-center object-cover"},null,8,E)):(a(),l("div",S,[y(t(x),{icon:"material-symbols-light:store",width:"30",height:"30"})]))]),e("div",null,[i.value?(a(),l("p",q,c(i.value.userName),1)):f("",!0)])]),e("div",$,[(a(!0),l(M,null,R(t(V),(o,_)=>(a(),l("div",{key:_},[o.senderId!==t(h)?(a(),l("div",G,[s[4]||(s[4]=e("div",{class:"flex justify-center items-center text-[9px] text-gray-500"}," Tue 3, 10:30pm ",-1)),e("div",H,[s[3]||(s[3]=e("div",{class:"size-6 bg-gray-800"},null,-1)),e("div",J,[e("div",K,c(o.message),1),s[2]||(s[2]=e("div",{class:"flex justify-start items-center text-xs font-semibold text-gray-500"}," Sending... ",-1))])])])):(a(),l("div",O,[s[6]||(s[6]=e("div",{class:"flex justify-center items-center text-[9px] text-gray-500"}," Tue 3, 10:30pm ",-1)),e("div",Q,[e("div",W,[e("div",X,c(o.message),1),s[5]||(s[5]=e("div",{class:"flex justify-end items-center text-xs font-semibold text-gray-500"}," Delivered ",-1))]),e("div",Y,[t(v)?(a(),l("img",{key:0,src:t(v),alt:""},null,8,Z)):f("",!0)])])]))]))),128))]),e("div",ee,[e("div",se,[B(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=o=>D(r)?r.value=o:null),class:"w-full py-1 px-3 outline-none bg-transparent placeholder:text-sm",placeholder:"Type a message"},null,512),[[C,t(r)]]),e("button",{onClick:s[1]||(s[1]=o=>t(g)(t(d).params.id)),disabled:t(r).trim()==="",class:L([t(r).trim()===""?"cursor-not-allowed ":"cursor-pointer","py-1 pl-2 pr-1 hover:bg-gray-800 hover:text-white transition border"])},[y(t(x),{icon:"material-symbols-light:send-rounded",width:"32",height:"32"})],10,te)]),s[7]||(s[7]=e("div",null,null,-1))])])]))}};export{re as default};
