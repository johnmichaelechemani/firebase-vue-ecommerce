import{m,n as y,p as h,c as a,f as p,d as f,_ as g,F as d,q as i,s as k,t as x,o as e,P as b,a as o,x as w,h as I,y as P,z as j,A as B,r as L}from"./index-D62pYs8s.js";const T={key:0,class:"text-center"},$={key:2},z={class:"text-xl font-bold text-gray-800 uppercase"},A={class:"flex justify-start items-center gap-2"},D={class:"flex items-center"},M=["src","alt"],C={class:"flex justify-start items-start gap-2 overflow-scroll"},E={class:"flex gap-2"},S={__name:"mallsHome",setup(F){const c=m(!0),u=m(null),_=y(()=>{const n=j.value.reduce((r,s)=>(r[s.mallType]||(r[s.mallType]=[]),r[s.mallType].push({...s,mallProducts:B.value.filter(l=>l.mallId===s.userId)}),r),{});return Object.entries(n).map(([r,s])=>({type:r,malls:s}))});async function v(){try{c.value=!0,await k(),x()}catch(n){u.value=n,console.error("Data fetching failed:",n)}finally{c.value=!1}}return h(v,console.table(_.value)),(n,r)=>{const s=L("router-link");return c.value?(e(),a("div",T,[p(b)])):u.value?(e(),f(g,{key:1,"err-message":u.value.message},null,8,["err-message"])):(e(),a("div",$,[(e(!0),a(d,null,i(_.value,l=>(e(),a("div",{key:l.type,class:"mb-6 p-4 bg-white border"},[o("h2",z,w(l.type),1),o("div",A,[(e(!0),a(d,null,i(l.malls,t=>(e(),a("div",{key:t.userId,class:"mb-4 shadow rounded-full"},[o("div",D,[p(s,{to:{name:"mallStore",params:{id:t.userId}}},{default:I(()=>[o("img",{src:t.userPhotoURL,loading:"lazy",alt:`${t.mallType} mall logo`,class:"w-16 h-16 object-cover rounded-full"},null,8,M)]),_:2},1032,["to"])])]))),128))]),o("div",C,[(e(!0),a(d,null,i(l.malls,t=>(e(),a("div",{key:t.userId,class:"mb-4"},[o("div",E,[(e(),f(P,{products:t.mallProducts,key:`products-${t.userId}`},null,8,["products"]))])]))),128))])]))),128))]))}}};export{S as default};
