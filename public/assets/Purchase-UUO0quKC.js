import{G as M,H as f,J as b,m as z,n as N,p as R,K as S,c as r,a as t,F as v,q as w,x as o,b as a,e as _,f as c,g as d,o as n,B as V,I as l,T as F,h as $,L as k,E as A,C as E,M as C,r as L,N as y,O as x,Q as j}from"./index-COLGLzO9.js";const G={class:"sm:ml-72 ml-20 fixed top-14 left-0 sm:w-[calc(100%-18rem)] w-[calc(100%-5rem)] h-full"},H={class:"p-2"},J={class:"mt-4 flex no-scrollbar overflow-x-auto gap-8"},K=["onClick"],Q={class:"text-sm mt-2 text-center font-semibold"},Y={class:"text-sm font-semibold p-2 capitalize"},U={class:"overflow-y-scroll no-scrollbar h-[calc(100vh-3.5rem)] pb-48"},W={class:"mx-2 flex flex-wrap gap-2"},X={class:"text-xs font-semibold text-gray-600"},Z={class:"flex justify-between items-center"},tt={class:"text-sm font-semibold flex justify-between items-center"},et={class:"text-xs shadow-sm font-medium border border-gray-800/50 px-2 capitalize"},st={class:"flex justify-start items-start gap-2"},ot={class:"sm:size-20 size-16 bg-gray-700/10 border-gray-700/20 border relative"},at=["src"],it={class:"text-sm font-semibold"},ct={class:"flex justify-start items-center gap-2"},rt={class:"text-xs font-medium flex justify-start items-center gap-0.5"},nt={class:"font-semibold flex justify-start items-center gap-2"},lt={class:"font-semibold text-xs flex justify-start items-center gap-0.5"},dt={class:"font-medium flex justify-start items-center gap-2"},ut={class:"font-medium text-xs uppercase flex justify-start items-center gap-0.5"},mt={class:"flex flex-wrap"},ht={class:"font-semibold text-xs flex justify-start items-center flex-wrap gap-1"},pt={class:"text-sm font-bold px-2 py-0.5 bg-gray-800 text-white"},ft={key:0,class:"flex justify-end mt-2"},_t=["onClick"],yt={key:1,class:"text-sm font-semibold flex justify-start items-center gap-2"},xt={class:"p-2 border shadow-sm"},wt={__name:"Purchase",setup(gt){const q=A(),g=E(),O=s=>{q.push({path:"/purchase",query:{status:s}})},m=M(),P=f(m,"users"),T=f(m,"purchase",b.value.userId,"items"),B=f(m,"products"),D=z([{id:1,name:"To Pay",status:"pay",icon:"mdi:credit-card-chip-outline"},{id:2,name:"To Ship",status:"ship",icon:"mdi:ship-wheel"},{id:3,name:"To Recieve",status:"recieve",icon:"mdi:target-account"},{id:4,name:"To Rate",status:"rate",icon:"mdi:star-outline"},{id:5,name:"Completed",status:"completed",icon:"mdi:check"},{id:6,name:"Cancelled",status:"cancelled",icon:"mdi:cancel-box-outline"}]),h=N(()=>{const s=g.query.status;return s?C.value.filter(i=>i.status===s):C.value}),p=(s,i)=>({completed:{text:"Buy Again",action:()=>console.log("Buy Again Clicked")},pay:{text:"Cancel",action:()=>I(i)},ship:{text:"Track Order",action:()=>console.log("Track Order Clicked")},rate:{text:"Rate Order",action:()=>console.log("Rate Order Clicked")},recieve:{text:"View Order",action:()=>console.log("View Order Clicked")}})[s]||null,I=async s=>{const i=y(T,s.id),u=y(B,s.productId),e=y(P,b.value.userId);await x(i,{status:"cancelled"}),s.paymentMethod==="jmpay"&&await x(e,{jmPay:j(s.totalPrice)}),await x(u,{inventory:j(s.quantity)})};return R(()=>{S()}),(s,i)=>{const u=L("router-link");return n(),r("div",G,[t("div",H,[i[0]||(i[0]=t("p",{class:"text-sm font-semibold"},"My Purchase",-1)),t("div",J,[(n(!0),r(v,null,w(D.value,e=>(n(),r("div",{class:"place-items-center",key:e.id,onClick:bt=>O(e.status)},[t("div",{class:V([s.$route.query.status===e.status?"bg-gray-800 text-white":"hover:bg-gray-700/10 border","p-2 transition "])},[c(a(l),{icon:e.icon,width:"24",height:"24"},null,8,["icon"])],2),t("p",Q,o(e.name),1)],8,K))),128))])]),t("p",Y,o(Object.keys(s.$route.query).length===0?"All":a(g).query.status),1),t("div",U,[t("div",W,[h.value?(n(!0),r(v,{key:0},w(h.value,e=>(n(),r("div",{key:e.id,class:"shadow-sm border p-2 w-full sm:max-w-72"},[t("div",X,o(a(F)(e.purchaseDate)),1),t("div",Z,[t("div",tt,[c(u,{to:{name:"mallStore",params:{id:e.mallId}},class:"flex justify-start items-center"},{default:$(()=>[t("span",null,[c(a(l),{icon:"material-symbols-light:store",width:"24",height:"24"})]),d(o(e.store)+" ",1),c(a(l),{icon:"material-symbols-light:double-arrow",width:"20",height:"20"})]),_:2},1032,["to"])]),t("div",et,o(e.status),1)]),t("div",st,[t("div",ot,[t("img",{src:e.image,loading:"lazy",alt:"",class:"object-center h-full w-full object-cover"},null,8,at)]),t("div",null,[t("p",it,o(e.name),1),t("div",ct,[t("p",rt,[c(a(l),{icon:"material-symbols-light:price-change-outline",width:"20",height:"20"}),d(" "+o(a(k)(e.price)),1)])]),t("div",nt,[t("div",lt,[c(a(l),{icon:"material-symbols-light:production-quantity-limits",width:"20",height:"20"}),d(o(e.quantity),1)])]),t("div",dt,[t("span",ut,[c(a(l),{icon:"material-symbols-light:delivery-truck-bolt-outline",width:"20",height:"20"}),d(o(e.paymentMethod),1)])]),t("div",mt,[t("div",ht,[d(" Total "+o(e.quantity)+" Item : ",1),t("p",pt," $ "+o(a(k)(e.totalPrice)),1)])])])]),p(e.status)?(n(),r("div",ft,[t("button",{class:"border text-sm border-gray-700/50 hover:bg-gray-800 transition hover:text-white font-semibold px-4 py-2",onClick:p(e.status,e).action},o(p(e.status).text),9,_t)])):_("",!0)]))),128)):_("",!0),h.value.length===0?(n(),r("div",yt,[t("span",xt,[c(a(l),{icon:"mdi:cup-empty",width:"24",height:"24"})]),i[1]||(i[1]=d("No Orders Yet "))])):_("",!0)])])])}}};export{wt as default};
