import{G as M,H as f,J as b,m as V,n as N,p as R,K as S,c,a as t,F as v,q as w,x as a,b as i,e as x,f as r,g as l,o as n,B as z,I as d,T as F,h as $,L as k,E as A,C as E,M as C,r as L,N as y,O as _,Q as j}from"./index-D62pYs8s.js";const G={class:"sm:ml-72 ml-20 fixed top-14 left-0 sm:w-[calc(100%-18rem)] w-[calc(100%-5rem)] h-full"},H={class:"p-2"},J={class:"mt-4 flex no-scrollbar overflow-x-auto gap-8"},K=["onClick"],Q={class:"text-sm mt-2 text-center font-semibold"},Y={class:"text-sm font-semibold p-2 capitalize"},U={class:"overflow-y-scroll no-scrollbar h-[calc(100vh-3.5rem)] pb-52"},W={class:"mx-2 flex flex-wrap gap-2"},X={class:"text-xs font-semibold text-gray-600"},Z={class:"flex justify-between items-center"},tt={class:"text-sm font-semibold flex justify-between items-center"},et={class:"text-xs shadow-sm font-medium border border-gray-800/50 px-2 capitalize"},st={class:"flex justify-start items-start gap-2"},ot={class:"max-w-16 sm:min-w-20 bg-gray-700/10 border-gray-700/20 border relative"},at=["src"],it={class:"text-sm font-semibold"},ct={class:"flex justify-start items-center gap-2"},rt={class:"text-xs font-medium flex justify-start items-center gap-0.5"},nt={class:"font-semibold flex justify-start items-center gap-2"},lt={class:"font-semibold text-xs flex justify-start items-center gap-0.5"},dt={class:"font-medium flex justify-start items-center gap-2"},ut={class:"font-medium text-xs uppercase flex justify-start items-center gap-0.5"},mt={class:"flex flex-wrap"},pt={class:"font-semibold text-xs flex justify-start items-center flex-wrap gap-1"},ht={class:"text-sm font-bold px-2 py-0.5 bg-gray-800 text-white"},ft={key:0,class:"flex justify-end mt-2"},xt=["onClick"],yt={key:1,class:"text-sm font-semibold flex justify-start items-center gap-2"},_t={class:"p-2 border shadow-sm"},wt={__name:"Purchase",setup(gt){const q=A(),g=E(),O=s=>{q.push({path:"/purchase",query:{status:s}})},m=M(),P=f(m,"users"),T=f(m,"purchase",b.value.userId,"items"),B=f(m,"products"),D=V([{id:1,name:"To Pay",status:"pay",icon:"mdi:credit-card-chip-outline"},{id:2,name:"To Ship",status:"ship",icon:"mdi:ship-wheel"},{id:3,name:"To Recieve",status:"recieve",icon:"mdi:target-account"},{id:4,name:"To Rate",status:"rate",icon:"mdi:star-outline"},{id:5,name:"Completed",status:"completed",icon:"mdi:check"},{id:6,name:"Cancelled",status:"cancelled",icon:"mdi:cancel-box-outline"}]),p=N(()=>{const s=g.query.status;return s?C.value.filter(o=>o.status===s):C.value}),h=(s,o)=>({completed:{text:"Buy Again",action:()=>console.log("Buy Again Clicked")},pay:{text:"Cancel",action:()=>I(o)},ship:{text:"Track Order",action:()=>console.log("Track Order Clicked")},rate:{text:"Rate Order",action:()=>console.log("Rate Order Clicked")},recieve:{text:"View Order",action:()=>console.log("View Order Clicked")}})[s]||null,I=async s=>{const o=y(T,s.id),u=y(B,s.productId),e=y(P,b.value.userId);await _(o,{status:"cancelled"}),s.paymentMethod==="jmpay"&&await _(e,{jmPay:j(s.totalPrice)}),await _(u,{inventory:j(s.quantity)})};return R(()=>{S()}),(s,o)=>{const u=L("router-link");return n(),c("div",G,[t("div",H,[o[0]||(o[0]=t("p",{class:"text-sm font-semibold"},"My Purchase",-1)),t("div",J,[(n(!0),c(v,null,w(D.value,e=>(n(),c("div",{class:"place-items-center",key:e.id,onClick:bt=>O(e.status)},[t("div",{class:z([s.$route.query.status===e.status?"bg-gray-800 text-white":"hover:bg-gray-700/10 border","p-2 transition "])},[r(i(d),{icon:e.icon,width:"24",height:"24"},null,8,["icon"])],2),t("p",Q,a(e.name),1)],8,K))),128))])]),t("p",Y,a(Object.keys(s.$route.query).length===0?"All":i(g).query.status),1),t("div",U,[t("div",W,[p.value?(n(!0),c(v,{key:0},w(p.value,e=>(n(),c("div",{key:e.id,class:"shadow-sm border p-2 w-full sm:max-w-72"},[t("div",X,a(i(F)(e.purchaseDate)),1),t("div",Z,[t("div",tt,[r(u,{to:{name:"mallStore",params:{id:e.mallId}},class:"flex justify-start items-center gap-1 uppercase"},{default:$(()=>[t("span",null,[r(i(d),{icon:"material-symbols-light:store",width:"24",height:"24"})]),l(a(e.store)+" ",1),o[1]||(o[1]=t("div",{class:"border px-2 bg-gray-700/5 text-xs font-semibold rounded-sm"}," Visit ",-1))]),_:2},1032,["to"])]),t("div",et,a(e.status),1)]),t("div",st,[t("div",ot,[t("img",{src:e.image,loading:"lazy",alt:"",class:"object-center h-full w-full object-cover"},null,8,at)]),t("div",null,[t("p",it,a(e.name),1),t("div",ct,[t("p",rt,[r(i(d),{icon:"material-symbols-light:price-change-outline",width:"20",height:"20"}),l(" "+a(i(k)(e.price)),1)])]),t("div",nt,[t("div",lt,[r(i(d),{icon:"material-symbols-light:production-quantity-limits",width:"20",height:"20"}),l(a(e.quantity),1)])]),t("div",dt,[t("span",ut,[r(i(d),{icon:"material-symbols-light:delivery-truck-bolt-outline",width:"20",height:"20"}),l(a(e.paymentMethod),1)])]),t("div",mt,[t("div",pt,[l(" Total "+a(e.quantity)+" Item : ",1),t("p",ht," $ "+a(i(k)(e.totalPrice)),1)])])])]),h(e.status)?(n(),c("div",ft,[t("button",{class:"border text-sm border-gray-700/50 hover:bg-gray-800 transition hover:text-white font-semibold px-4 py-2",onClick:h(e.status,e).action},a(h(e.status).text),9,xt)])):x("",!0)]))),128)):x("",!0),p.value.length===0?(n(),c("div",yt,[t("span",_t,[r(i(d),{icon:"mdi:cup-empty",width:"24",height:"24"})]),o[2]||(o[2]=l("No Orders Yet "))])):x("",!0)])])])}}};export{wt as default};
